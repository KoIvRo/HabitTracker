# Habit Tracker

## Использование

### Главная страница (MainPage)
- Навигация по дням через кнопки "←" и "→"
- Выбор настроения от 1 (очень плохо) до 7 (отлично)
- Добавление разовых задач через кнопку "+" (только для текущего дня)
- Отметка выполнения привычек - нажатие на кнопку с галочкой
- Удаление привычек из дня - красная кнопка "✕"

### Страница базовых привычек (BaseHabitsPage)
- Добавление базовых привычек - появляются во всех будущих днях
- Удаление базовых привычек - удаляет только из будущих дней, сохраняет историю

### Календарь (CalendarPage)
- Просмотр прогресса за 64 дня
- Цвет фона показывает процент выполнения привычек (чем зеленее, тем лучше)
- Цвет границы показывает настроение (соответствует цветам кнопок настроения)
- Нажатие на день показывает детальную информацию
- Кнопка "Go to Day" переходит к выбранному дню

## Структура проекта

### Файлы и их назначение

#### Views/
1. **MainPage.xaml/xaml.cs** - Главная страница приложения
   - Отображение привычек на конкретный день
   - Управление настроением
   - Добавление/удаление разовых задач

2. **BaseHabitsPage.xaml/xaml.cs** - Управление базовыми привычками
   - Создание базовых привычек для будущих дней
   - Управление списком базовых привычек

3. **CalendarPage.xaml/xaml.cs** - Календарь прогресса
   - Визуализация выполнения привычек за 64 дня
   - Цветовая индикация настроения и прогресса

#### Database/
4. **DatabaseContext.cs** - Работа с базой данных SQLite
   - Инициализация и управление базой данных
   - CRUD операции для привычек и записей
   - Расчет статистики выполнения

#### Models/
5. **Habit.cs** - Модель привычки
   - Хранит информацию о привычке
   - Разделение на базовые и разовые

6. **DailyRecord.cs** - Модель ежедневной записи
   - Настроение дня
   - Статистика выполнения привычек

7. **HabitCompletion.cs** - Модель выполнения привычки
   - Отслеживание выполнения привычек по дням

## Документация по классам и файлам

### MainPage.xaml.cs
Основная страница приложения. Управляет:
- Отображением привычек для выбранной даты
- Выбором настроения (7 уровней)
- Добавлением/удалением разовых привычек
- Отметкой выполнения привычек
- Навигацией по дням

**Ключевые методы:**
- `LoadData()` - загрузка данных для выбранной даты
- `SetMood(int mood)` - установка настроения
- `AddHabitToUI(Habit habit)` - создание UI элемента для привычки
- `AddHoverEffectsToMoodButtons()` - эффекты наведения для кнопок настроения (Windows)

### BaseHabitsPage.xaml.cs
Управление базовыми привычками:
- Создание новых базовых привычек
- Просмотр списка существующих
- Удаление привычек из будущих дней (сохранение истории)

**Ключевые методы:**
- `LoadBaseHabits()` - загрузка списка базовых привычек
- `OnAddHabitClicked()` - обработка добавления новой привычки
- `AddHabitToUI(Habit habit)` - отображение привычки в UI

### CalendarPage.xaml.cs
Визуализация прогресса:
- Отображение календаря 8x8 (64 дня)
- Цветовая индикация выполнения привычек
- Отображение настроения через цвет границы
- Навигация к выбранному дню

**Ключевые методы:**
- `GenerateCalendarGrid()` - создание сетки календаря
- `CreateDayBox(DateTime date)` - создание элемента дня
- `CalculateCompletionColor(double completionRate)` - расчет цвета прогресса
- `CalculateMoodColor(int mood)` - расчет цвета настроения

### DatabaseContext.cs
Управление базой данных SQLite:
- Инициализация таблиц
- Работа с привычками и записями
- Расчет статистики
- Управление исключениями (дни без привычек)

**Ключевые методы:**
- `GetHabitsForDateAsync(DateTime date)` - получение привычек для даты
- `SetHabitCompletionAsync()` - отметка выполнения привычки
- `RemoveBaseHabitFromFutureAsync()` - деактивация базовой привычки
- `GetRecordsDictionaryAsync()` - получение записей для календаря

### Модели данных
**Habit** - хранит информацию о привычке:
- `IsBaseHabit` - флаг базовой привычки
- `DeactivatedDate` - дата деактивации (для базовых)
- `CreatedDate` - дата создания

**DailyRecord** - ежедневная статистика:
- `Mood` - настроение (1-7)
- `CompletedHabits` - количество выполненных привычек
- `TotalHabits` - общее количество привычек в день

**HabitCompletion** - связь привычки и даты выполнения:
- `HabitId` - ID привычки
- `Date` - дата выполнения
- `IsCompleted` - статус выполнения